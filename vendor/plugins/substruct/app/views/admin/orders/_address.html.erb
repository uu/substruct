<div class="padLeft">

	<div class="floatHalf">
		<%= make_label(t(:first_name), true) %>
		<%= text_field "#{address_type}_address", 'first_name', :maxlength => 50, :size => 30, :class => 'textInput' %>
		<%= error_message_on("#{address_type}_address", :first_name) %>
	</div>
	<div class="floatHalf">
		<%= make_label(t(:last_name), true) %>
	  <%= text_field "#{address_type}_address", 'last_name', :maxlength => 50, :size => 30, :class => 'textInput' %>
	  <%= error_message_on("#{address_type}_address", :last_name) %>
	</div>
	<div class="clear">&nbsp;</div>

	<div class="floatHalf">
		<%= make_label(t(:address), true) %>
		<%= text_field "#{address_type}_address", 'address', :maxlength => 255, :size => 30, :class => 'textInput' %>
        <%= content_tag :p, t(:address_info), :class => 'info' %>
		<%= error_message_on("#{address_type}_address", :address) %>
	</div>
	<div class="floatHalf">
		<%= make_label(t(:city)) %>
		<%= text_field "#{address_type}_address", 'city', :maxlength => 50, :size => 30, :class => 'textInput' %>
		<%= error_message_on("#{address_type}_address", :city) %>
  </div>
	<div class="clear">&nbsp;</div>

	<div class="floatHalf">
		<div class="float">
			<%= make_label(t(:state)) %>
  		<%= text_field "#{address_type}_address", 'state', :maxlength => 30, :size => 10, :class => 'textInput' %>
  		<%= error_message_on("#{address_type}_address", :state) %>
  	</div>
		<div class="float">
			<%= make_label(t(:postal_code), true) %>
		  <%= text_field "#{address_type}_address", 'zip', :maxlength => 10, :size => 10, :class => 'textInput' %>
		  <%= error_message_on("#{address_type}_address", :zip) %>
		</div>
		<div class="clear"></div>
	</div>
	<div class="floatHalf">
    <%
 			country = instance_variable_get("@#{address_type}_address").country
			if country
				selected_country = country.id 
			else
				selected_country = nil
			end
			# If not passed, so not defined, defaults to false.
      show_obsolete ||= false
		%>
		<%= make_label(t(:country)) %>
		<select name="#{address_type}_address">
      <% @countries.each { |country| %>
        <option value="<%= country.id %>" <%= country.id == selected_country.to_i ? "selected" : "" %>><%= country.name %></option>
      <% } %>
    </select>
	</div>
	<div class="clear">&nbsp;</div>

	<%= make_label(t(:phone), true) %>
	<%= text_field "#{address_type}_address", 'telephone', :maxlength => 20, :class => 'textInput' %>
	<%= error_message_on("#{address_type}_address", :telephone) %>

</div>
<div class="clear">&nbsp;</div>
